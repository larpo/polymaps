if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function ga(d){var g=d.indexOf(":");return g<0?d:{space:s.ns[d.substring(0,g)],local:d.substring(g+1)}}function S(){for(var d=0;d<S.maps.length;d++)S.maps[d].resize()}function Y(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function Z(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function aa(d,g){if(d.row>g.row){var a=d;d=g;g=a}return{x0:d.column,y0:d.row,x1:g.column,y1:g.row,dx:g.column-d.column,dy:g.row-d.row}}function da(d,g,a,l,e){a=Math.max(a,Math.floor(g.y0));
l=Math.min(l,Math.ceil(g.y1));if(d.x0==g.x0&&d.y0==g.y0?d.x0+g.dy/d.dy*d.dx<g.x1:d.x1-g.dy/d.dy*d.dx<g.x0){var c=d;d=g;g=c}c=d.dx/d.dy;var f=g.dx/g.dy,j=d.dx>0,t=g.dx<0;for(a=a;a<l;a++){var n=c*Math.max(0,Math.min(d.dy,a+j-d.y0))+d.x0;e(Math.floor(f*Math.max(0,Math.min(g.dy,a+t-g.y0))+g.x0),Math.ceil(n),a)}}function ea(d,g,a,l,e,c){var f=aa(d,g);g=aa(g,a);d=aa(a,d);if(f.dy>g.dy){a=f;f=g;g=a}if(f.dy>d.dy){a=f;f=d;d=a}if(g.dy>d.dy){a=g;g=d;d=a}f.dy&&da(d,f,l,e,c);g.dy&&da(d,g,l,e,c)}s.version="2.5.1";
var $={x:0,y:0};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.id=function(){var d=0;return function(){return++d}}();s.svg=function(d){return document.createElementNS(s.ns.svg,d)};s.transform=function(d,g,a,l,e,c){var f={},j,t,n;if(!arguments.length){d=1;g=e=a=0;l=1;c=0}f.zoomFraction=function(k){if(!arguments.length)return t;t=k;j=Math.floor(t+Math.log(Math.sqrt(d*d+g*g+a*a+l*l))/Math.LN2);n=Math.pow(2,-j);return f};f.apply=function(k){var h=Math.pow(2,-k.zoom),q=
Math.pow(2,k.zoom-j);return{column:(d*k.column*h+a*k.row*h+e)*q,row:(g*k.column*h+l*k.row*h+c)*q,zoom:k.zoom-j}};f.unapply=function(k){var h=Math.pow(2,-k.zoom),q=Math.pow(2,k.zoom+j);return{column:(k.column*h*l-k.row*h*a-e*l+c*a)/(d*l-g*a)*q,row:(k.column*h*g-k.row*h*d-e*g+c*d)/(a*g-l*d)*q,zoom:k.zoom+j}};f.toString=function(){return"matrix("+[d*n,g*n,a*n,l*n].join(" ")+" 0 0)"};return f.zoomFraction(0)};s.cache=function(d,g){function a(h){k--;g&&g(h);delete f[h.key];if(h.next)h.next.prev=h.prev;
else if(t=h.prev)t.next=null;if(h.prev)h.prev.next=h.next;else if(j=h.next)j.prev=null}function l(){for(var h=t;k>n;h=h.prev){if(!h)break;h.lock||a(h)}}var e={},c={},f={},j=null,t=null,n=64,k=0;e.peek=function(h){return f[[h.zoom,h.column,h.row].join("/")]};e.load=function(h,q){var w=[h.zoom,h.column,h.row].join("/"),z=f[w];if(z){if(z.prev){if(z.prev.next=z.next)z.next.prev=z.prev;else t=z.prev;z.prev=null;z.next=j;j=j.prev=z}z.lock=1;return c[w]=z}z={key:w,column:h.column,row:h.row,zoom:h.zoom,next:j,
prev:null,lock:1};d.call(null,z,q);c[w]=f[w]=z;if(j)j.prev=z;else t=z;j=z;k++;return z};e.unload=function(h){if(!(h in c))return false;var q=c[h];q.lock=0;delete c[h];q.request&&q.request.abort(false)&&a(q);return q};e.locks=function(){return c};e.size=function(h){if(!arguments.length)return n;n=h;l();return e};e.flush=function(){l();return e};e.clear=function(){for(var h in f){var q=f[h];q.request&&q.request.abort(false);g&&g(f[h]);if(q.lock){q.lock=0;q.element.parentNode.removeChild(q.element)}}c=
{};f={};j=t=null;k=0;return e};return e};s.url=function(d){function g(e){var c=e.zoom<0?1:1<<e.zoom,f=e.column;if(l){f=e.column%c;if(f<0)f+=c}else if(f<0||f>=c)return null;return d.replace(/{(.)}/g,function(j,t){switch(t){case "S":return a[(Math.abs(e.zoom)+e.row+f)%a.length];case "Z":return e.zoom;case "X":return f;case "Y":return e.row;case "B":var n=s.map.coordinateLocation({row:e.row,column:f,zoom:e.zoom}),k=s.map.coordinateLocation({row:e.row+1,column:f+1,zoom:e.zoom}),h=Math.ceil(Math.log(e.zoom)/
Math.LN2);return k.lat.toFixed(h)+","+n.lon.toFixed(h)+","+n.lat.toFixed(h)+","+k.lon.toFixed(h)}return t})}var a=[],l=true;g.template=function(e){if(!arguments.length)return d;d=e;return g};g.hosts=function(e){if(!arguments.length)return a;a=e;return g};g.repeat=function(e){if(!arguments.length)return l;l=e;return g};return g};s.dispatch=function(d){var g={};d.on=function(a,l){for(var e=g[a]||(g[a]=[]),c=0;c<e.length;c++)if(e[c].handler==l)return d;e.push({handler:l,on:true});return d};d.off=function(a,
l){var e=g[a];if(e)for(var c=0;c<e.length;c++){var f=e[c];if(f.handler==l){f.on=false;e.splice(c,1);break}}return d};return function(a){var l=g[a.type];if(l){l=l.slice();for(var e=0;e<l.length;e++){var c=l[e];c.on&&c.handler.call(d,a)}}}};s.queue=function(){function d(){if(!(e>=c||!l.length)){e++;l.pop()()}}function g(f){for(var j=0;j<l.length;j++)if(l[j]==f){l.splice(j,1);return true}return false}function a(f,j,t){function n(){k=new XMLHttpRequest;t&&k.overrideMimeType&&k.overrideMimeType(t);k.open("GET",
f,true);k.onreadystatechange=function(){if(k.readyState==4){e--;k.status<300&&j(k);d()}};k.send(null)}var k;l.push(n);d();return{abort:function(h){if(g(n))return true;if(h&&k){k.abort();return true}return false}}}var l=[],e=0,c=6;return{text:function(f,j,t){return a(f,function(n){n.responseText&&j(n.responseText)},t)},xml:function(f,j){return a(f,function(t){t.responseXML&&j(t.responseXML)},"application/xml")},json:function(f,j){return a(f,function(t){t.responseText&&j(JSON.parse(t.responseText))},
"application/json")},image:function(f,j,t){function n(){k=document.createElement("img");k.onerror=function(){e--;d()};k.onload=function(){e--;t(k);d()};k.src=j;f.setAttributeNS(s.ns.xlink,"href",j)}var k;l.push(n);d();return{abort:function(h){if(g(n))return true;if(h&&k){k.src="about:";return true}return false}}}}}();s.map=function(){function d(){if(q)if(n<q[0])n=q[0];else if(n>q[1])n=q[1];k=n-(n=Math.round(n));h=Math.pow(2,k)}function g(){if(r){var i=45/Math.pow(2,n+k-3),o=Math.max(Math.abs(D*f.x+
z*f.y),Math.abs(C*f.x+F*f.y)),u=Y(L-o*i/j.y);o=Y(m+o*i/j.y);t.lat=Math.max(u,Math.min(o,t.lat));u=Math.max(Math.abs(D*f.y+z*f.x),Math.abs(C*f.y+F*f.x));t.lon=Math.max(r[0].lon-u*i/j.x,Math.min(r[1].lon+u*i/j.x,t.lon))}}var a={},l,e,c=$,f=$,j={x:256,y:256},t={lat:37.76487,lon:-122.41948},n=12,k=0,h=1,q=[1,18],w=0,z=1,D=0,F=1,C=0,L=-180,m=180,r=[{lat:Y(L),lon:-Infinity},{lat:Y(m),lon:Infinity}];a.locationCoordinate=function(i){i=s.map.locationCoordinate(i);var o=Math.pow(2,n);i.column*=o;i.row*=o;i.zoom+=
n;return i};a.coordinateLocation=s.map.coordinateLocation;a.coordinatePoint=function(i,o){var u=Math.pow(2,n-o.zoom),A=Math.pow(2,n-i.zoom),B=(o.column*u-i.column*A)*j.x*h;u=(o.row*u-i.row*A)*j.y*h;return{x:f.x+z*B-D*u,y:f.y+D*B+z*u}};a.pointCoordinate=function(i,o){var u=Math.pow(2,n-i.zoom),A=(o.x-f.x)/h,B=(o.y-f.y)/h;return{column:i.column*u+(F*A-C*B)/j.x,row:i.row*u+(C*A+F*B)/j.y,zoom:n}};a.locationPoint=function(i){var o=Math.pow(2,n+k-3)/45,u=(i.lon-t.lon)*o*j.x;i=(Z(t.lat)-Z(i.lat))*o*j.y;
return{x:f.x+z*u-D*i,y:f.y+D*u+z*i}};a.pointLocation=function(i){var o=45/Math.pow(2,n+k-3),u=(i.x-f.x)*o;i=(i.y-f.y)*o;return{lon:t.lon+(F*u-C*i)/j.x,lat:Y(Z(t.lat)-(C*u+F*i)/j.y)}};var v=s.svg("rect");v.setAttribute("visibility","hidden");v.setAttribute("pointer-events","all");a.container=function(i){if(!arguments.length)return l;l=i;l.setAttribute("class","map");l.appendChild(v);return a.resize()};a.focusableParent=function(){for(var i=l;i;i=i.parentNode)if(i.tabIndex>=0)return i;return window};
a.mouse=function(i){var o=(l.ownerSVGElement||l).createSVGPoint();o.x=i.clientX;o.y=i.clientY;o=l.parentElement.getBoundingClientRect();return{x:i.clientX-o.left-l.clientLeft,y:i.clientY-o.top-l.clientTop}};a.size=function(i){if(!arguments.length)return c;e=i;return a.resize()};a.resize=function(){if(e){c=e;S.remove(a)}else{v.setAttribute("width","100%");v.setAttribute("height","100%");b=v.getBBox();c={x:b.width,y:b.height};S.add(a)}v.setAttribute("width",c.x);v.setAttribute("height",c.y);f={x:c.x/
2,y:c.y/2};g();a.dispatch({type:"resize"});return a};a.tileSize=function(i){if(!arguments.length)return j;j=i;a.dispatch({type:"move"});return a};a.center=function(i){if(!arguments.length)return t;t=i;g();a.dispatch({type:"move"});return a};a.panBy=function(i){var o=45/Math.pow(2,n+k-3),u=i.x*o;i=i.y*o;return a.center({lon:t.lon+(C*i-F*u)/j.x,lat:Y(Z(t.lat)+(C*u+F*i)/j.y)})};a.centerRange=function(i){if(!arguments.length)return r;if(r=i){L=r[0].lat>-90?Z(r[0].lat):-Infinity;m=r[0].lat<90?Z(r[1].lat):
Infinity}else{L=-Infinity;m=Infinity}g();a.dispatch({type:"move"});return a};a.zoom=function(i){if(!arguments.length)return n+k;n=i;d();return a.center(t)};a.zoomBy=function(i,o,u){if(arguments.length<2)return a.zoom(n+k+i);if(arguments.length<3)u=a.pointLocation(o);n=n+k+i;d();var A=a.locationPoint(u);return a.panBy({x:o.x-A.x,y:o.y-A.y})};a.zoomRange=function(i){if(!arguments.length)return q;q=i;return a.zoom(n+k)};a.extent=function(i){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,
y:0})];var o=a.locationPoint(i[0]),u=a.locationPoint(i[1]),A=Math.max((u.x-o.x)/c.x,(o.y-u.y)/c.y);o=a.pointLocation({x:(o.x+u.x)/2,y:(o.y+u.y)/2});n=n+k-Math.log(A)/Math.LN2;d();return a.center(o)};a.angle=function(i){if(!arguments.length)return w;w=i;z=Math.cos(w);D=Math.sin(w);F=Math.cos(-w);C=Math.sin(-w);g();a.dispatch({type:"move"});return a};a.add=function(i){i.map(a);return a};a.remove=function(i){i.map(null);return a};a.dispatch=s.dispatch(a);return a};S.maps=[];S.add=function(d){for(var g=
0;g<S.maps.length;g++)if(S.maps[g]==d)return;S.maps.push(d)};S.remove=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d){S.maps.splice(g,1);return}};if(window.addEventListener){window.addEventListener("resize",S,false);window.addEventListener("load",S,false)}s.map.locationCoordinate=function(d){var g=1/360;return{column:(d.lon+180)*g,row:(180-Z(d.lat))*g,zoom:0}};s.map.coordinateLocation=function(d){var g=45/Math.pow(2,d.zoom-3);return{lon:g*d.column-180,lat:Y(180-g*d.row)}};s.layer=function(d,
g){function a(C){for(var L=D[0].nextSibling;z<C;z++){q.insertBefore(D[-4],L);q.insertBefore(D[2],L);q.insertBefore(D[1],L);for(var m=D[-4],r=-4;r<2;)D[r]=D[++r];D[r]=m}}function l(C){for(var L=D[0].nextSibling;z>C;z--){q.insertBefore(D[-1],L);q.insertBefore(D[2],D[-4]);for(var m=D[2],r=2;r>-4;)D[r]=D[--r];D[r]=m}}function e(){function C(O){var x=O.zoom,E=x<0?1:1<<x,H=O.column%E,J=O.row;if(H<0)H+=E;return{locationPoint:function(K){K=s.map.locationCoordinate(K);var P=Math.pow(2,x-K.zoom);return{x:A.x*
(P*K.column-H),y:A.y*(P*K.row-J)}}}}function L(O,x,E){var H=M.zoom,J=2-Q,K=4+Q;for(O=O;O<x;O++){var P=f.load({column:O,row:E,zoom:H},C);if(!P.ready&&!(P.key in G)){P.proxyRefs={};for(var W,X,U,V=1;V<=J;V++){X=true;for(var ba=0,fa=1<<V;ba<=fa;ba++)for(var ca=0;ca<=fa;ca++)if((U=f.peek(W={column:(O<<V)+ca,row:(E<<V)+ba,zoom:H+V}))&&U.ready){G[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U}else X=false;if(X)break}if(!X)for(V=1;V<=K;V++)if((U=f.peek(W={column:O>>V,row:E>>V,zoom:H-V}))&&U.ready){G[U.key]=
f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U;break}}G[P.key]=P}}function m(O){return Math.round(O*256)/256}var r=c.map(),v=r.zoom(),i=v-(v=Math.round(v)),o=r.size(),u=r.angle(),A=r.tileSize(),B=r.locationCoordinate(r.center());if(z!=v){if(z<v)a(v);else if(z>v)l(v);else z=v;for(var y=-4;y<=2;y++){var N=D[y];N.setAttribute("class","zoom"+(y<0?"":"+")+y+" zoom"+(v+y));N.setAttribute("transform","scale("+Math.pow(2,-y)+")")}}var M=r.pointCoordinate(B,$);y=r.pointCoordinate(B,{x:o.x,y:0});v=r.pointCoordinate(B,
o);r=r.pointCoordinate(B,{x:0,y:o.y});N=B.column;var T=B.row;B.column=Math.round((Math.round(A.x*B.column)+(o.x&1)/2)/A.x);B.row=Math.round((Math.round(A.y*B.row)+(o.y&1)/2)/A.y);N-=B.column;T-=B.row;var I=m(Math.pow(2,i));q.setAttribute("transform","translate("+Math.round(o.x/2-N*A.x*I)+","+Math.round(o.y/2-T*A.y*I)+")"+(u?"rotate("+u/Math.PI*180+")":"")+(i?"scale("+I+")":"")+(w?w.zoomFraction(i):""));if(w){M=w.unapply(M);y=w.unapply(y);v=w.unapply(v);r=w.unapply(r);B=w.unapply(B)}var Q=n?n(M.zoom)-
M.zoom:0;if(Q){o=Math.pow(2,Q);M.column*=o;M.row*=o;y.column*=o;y.row*=o;v.column*=o;v.row*=o;r.column*=o;r.row*=o;M.zoom=y.zoom=v.zoom=r.zoom+=Q}i=f.locks();var G={};for(var R in i)i[R].proxyCount=0;if(t&&Q>-5&&Q<3){u=M.zoom<0?1:1<<M.zoom;if(j){ea(M,y,v,0,u,L);ea(v,r,M,0,u,L)}else{o=Math.floor((M.column+v.column)/2);u=Math.max(0,Math.min(u-1,Math.floor((y.row+r.row)/2)));y=Math.min(4,M.zoom);o=o>>y<<y;u=u>>y<<y;L(o,o+1,u)}}for(R in G){y=G[R];o=m(Math.pow(2,y.level=y.zoom-B.zoom));y.element.setAttribute("transform",
"translate("+Math.round(y.x=A.x*(y.column-B.column*o))+","+Math.round(y.y=A.y*(y.row-B.row*o))+")")}for(R in i)if(!(R in G)){y=f.unload(R);y.element.parentNode.removeChild(y.element);delete y.proxyRefs}for(R in G){y=G[R];if(y.element.parentNode!=D[y.level]){D[y.level].appendChild(y.element);c.show&&c.show(y)}}f.flush();c.dispatch({type:"move"})}var c={},f=c.cache=s.cache(d,g).size(512),j=true,t=true,n,k,h,q=s.svg("g"),w,z,D={};q.setAttribute("class","layer");for(var F=-4;F<=-1;F++)D[F]=q.appendChild(s.svg("g"));
for(F=2;F>=1;F--)D[F]=q.appendChild(s.svg("g"));D[0]=q.appendChild(s.svg("g"));c.map=function(C){if(!arguments.length)return h;if(h){if(h==C){q.parentNode.appendChild(q);return c}h.off("move",e).off("resize",e);q.parentNode.removeChild(q)}if(h=C){h.container().appendChild(q);c.init&&c.init(q);h.on("move",e).on("resize",e);e()}return c};c.container=function(){return q};c.levels=function(){return D};c.id=function(C){if(!arguments.length)return k;k=C;q.setAttribute("id",C);return c};c.visible=function(C){if(!arguments.length)return t;
(t=C)?q.removeAttribute("visibility"):q.setAttribute("visibility","hidden");h&&e();return c};c.transform=function(C){if(!arguments.length)return w;w=C;h&&e();return c};c.zoom=function(C){if(!arguments.length)return n;n=typeof C=="function"||C==null?C:function(){return C};h&&e();return c};c.tile=function(C){if(!arguments.length)return j;j=C;h&&e();return c};c.reload=function(){f.clear();h&&e();return c};c.dispatch=s.dispatch(c);c.on("load",function(C){if(C.tile.proxyRefs){for(var L in C.tile.proxyRefs){var m=
C.tile.proxyRefs[L];--m.proxyCount<=0&&f.unload(L)&&m.element.parentNode.removeChild(m.element)}delete C.tile.proxyRefs}});return c};s.image=function(){var d=s.layer(function(a){var l=a.element=s.svg("image"),e=d.map().tileSize();l.setAttribute("preserveAspectRatio","none");l.setAttribute("width",e.x);l.setAttribute("height",e.y);if(typeof g=="function"){l.setAttribute("opacity",0);e=g(a);if(e!=null)a.request=s.queue.image(l,e,function(c){delete a.request;a.ready=true;a.img=c;l.removeAttribute("opacity");
d.dispatch({type:"load",tile:a})});else{a.ready=true;d.dispatch({type:"load",tile:a})}}else{a.ready=true;g!=null&&l.setAttributeNS(s.ns.xlink,"href",g);d.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),g;d.url=function(a){if(!arguments.length)return g;g=typeof a=="string"&&/{.}/.test(a)?s.url(a):a;return d.reload()};return d};s.geoJson=function(d){function g(m){var r={lat:0,lon:0};return function(v){r.lat=v[1];r.lon=v[0];var i=m(r);v.x=i.x;v.y=i.y;return i}}function a(m,
r){return m&&m.type in D&&D[m.type](m,r)}function l(m,r,v){return m.type in F&&F[m.type](m,r,v)}function e(){var m=c.map().zoom(),r=c.cache.locks(),v,i,o,u,A,B,y;if(w=="fixed")for(v in r){if((i=r[v]).scale!=m){y="scale("+Math.pow(2,i.zoom-m)+")";u=-1;for(A=(o=i.features).length;++u<A;)l((B=o[u]).data.geometry,B.element,y);i.scale=m}}else for(v in r){u=-1;for(A=(o=(i=r[v]).features).length;++u<A;)l((B=o[u]).data.geometry,B.element,"");delete i.scale}}var c=s.layer(function(m,r){function v(o){var u=
[];if(o.next)m.request=d(o.next.href,v);switch(o.type){case "FeatureCollection":for(var A=0;A<o.features.length;A++){var B=o.features[A],y=a(B.geometry,r);y&&u.push({element:i.appendChild(y),data:B})}break;case "Feature":(y=a(o.geometry,r))&&u.push({element:i.appendChild(y),data:o});break;default:(y=a(o,r))&&u.push({element:i.appendChild(y),data:{type:"Feature",geometry:o}});break}m.ready=true;u.push.apply(m.features,u);c.dispatch({type:"load",tile:m,features:u})}var i=m.element=s.svg("g");m.features=
[];r=g(r(m).locationPoint);if(j!=null)m.request=d(typeof j=="function"?j(m):j,v);else v({type:"FeatureCollection",features:z||[]})},function(m){m.request&&m.request.abort(true)}),f=c.container(),j,t=true,n="org.polymaps."+s.id(),k="url(#"+n+")",h=f.insertBefore(s.svg("clipPath"),f.firstChild),q=h.appendChild(s.svg("rect")),w="auto",z;f.setAttribute("fill-rule","evenodd");h.setAttribute("id",n);if(!arguments.length)d=s.queue.json;var D={Point:function(m,r){var v=r(m.coordinates),i=s.svg("circle");
i.setAttribute("r",4.5);i.setAttribute("transform","translate("+v.x+","+v.y+")");return i},MultiPoint:function(m,r){for(var v=s.svg("g"),i=m.coordinates,o,u,A=-1,B=i.length;++A<B;){u=v.appendChild(s.svg("circle"));u.setAttribute("r",4.5);u.setAttribute("transform","translate("+(o=r(i[A])).x+","+o.y+")")}return v},LineString:function(m,r){for(var v=s.svg("path"),i=["M"],o=m.coordinates,u,A=-1,B=o.length;++A<B;)i.push((u=r(o[A])).x,",",u.y,"L");i.pop();if(i.length){v.setAttribute("d",i.join(""));return v}},
MultiLineString:function(m,r){for(var v=s.svg("path"),i=[],o=m.coordinates,u,A=-1,B,y=o.length,N;++A<y;){u=o[A];B=-1;N=u.length;for(i.push("M");++B<N;)i.push((p=r(u[B])).x,",",p.y,"L");i.pop()}if(i.length){v.setAttribute("d",i.join(""));return v}},Polygon:function(m,r){for(var v=s.svg("path"),i=[],o=m.coordinates,u,A=-1,B,y=o.length,N;++A<y;){u=o[A];B=-1;N=u.length-1;for(i.push("M");++B<N;)i.push((p=r(u[B])).x,",",p.y,"L");i[i.length-1]="Z"}if(i.length){v.setAttribute("d",i.join(""));return v}},MultiPolygon:function(m,
r){for(var v=s.svg("path"),i=[],o=m.coordinates,u,A,B=-1,y,N,M=o.length,T,I;++B<M;){u=o[B];y=-1;for(T=u.length;++y<T;){A=u[y];N=-1;I=A.length-1;for(i.push("M");++N<I;)i.push((p=r(A[N])).x,",",p.y,"L");i[i.length-1]="Z"}}if(i.length){v.setAttribute("d",i.join(""));return v}},GeometryCollection:function(m,r){for(var v=s.svg("g"),i=-1,o=m.geometries,u=o.length,A;++i<u;)(A=a(o[i],r))&&v.appendChild(A);return v}},F={Point:function(m,r,v){m=m.coordinates;r.setAttribute("transform","translate("+m.x+","+
m.y+")"+v)},MultiPoint:function(m,r,v){m=m.coordinates;var i=-1,o=u.length;r=r.firstChild;for(var u;++i<o;){u=m[i];r.setAttribute("transform","translate("+u.x+","+u.y+")"+v);r=r.nextSibling}}};c.url=function(m){if(!arguments.length)return j;j=typeof m=="string"&&/{.}/.test(m)?s.url(m):m;if(j!=null)z=null;typeof j=="string"&&c.tile(false);return c.reload()};c.features=function(m){if(!arguments.length)return z;if(z=m){j=null;c.tile(false)}return c.reload()};c.clip=function(m){if(!arguments.length)return t;
t&&f.removeChild(h);if(t=m)f.insertBefore(h,f.firstChild);var r=c.cache.locks();for(var v in r)t?r[v].element.setAttribute("clip-path",k):r[v].element.removeAttribute("clip-path");return c};var C=c.tile;c.tile=function(m){arguments.length&&!m&&c.clip(m);return C.apply(c,arguments)};var L=c.map;c.map=function(m){if(m&&q){var r=m.tileSize();q.setAttribute("width",r.x);q.setAttribute("height",r.y)}return L.apply(c,arguments)};c.scale=function(m){if(!arguments.length)return w;(w=m)?c.on("move",e):c.off("move",
e);c.map()&&e();return c};c.show=function(m){t?m.element.setAttribute("clip-path",k):m.element.removeAttribute("clip-path");c.dispatch({type:"show",tile:m,features:m.features});return c};c.reshow=function(){var m=c.cache.locks();for(var r in m)c.show(m[r]);return c};return c};s.dblclick=function(){function d(c){var f=l.zoom();f=c.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);a==="mouse"?l.zoomBy(f,l.mouse(c)):l.zoomBy(f)}var g={},a="mouse",l,e;g.zoom=function(c){if(!arguments.length)return a;a=c;return g};
g.map=function(c){if(!arguments.length)return l;if(l){e.removeEventListener("dblclick",d,false);e=null}if(l=c){e=l.container();e.addEventListener("dblclick",d,false)}return g};return g};s.drag=function(){function d(f){if(!f.shiftKey){c={x:f.clientX,y:f.clientY};l.focusableParent().focus();f.preventDefault();document.body.style.setProperty("cursor","move",null)}}function g(f){if(c){l.panBy({x:f.clientX-c.x,y:f.clientY-c.y});c.x=f.clientX;c.y=f.clientY}}var a={},l,e,c;a.map=function(f){if(!arguments.length)return l;
if(l){e.removeEventListener("mousedown",d,false);e=null}if(l=f){e=l.container();e.addEventListener("mousedown",d,false)}return a};window.addEventListener("mousemove",g,false);window.addEventListener("mouseup",function(f){if(c){g(f);c=null;document.body.style.removeProperty("cursor")}},false);return a};s.wheel=function(){function d(){f=null}function g(h){var q=h.wheelDelta||-h.detail,w;if(q)if(e){try{k.scrollTop=1E3;k.dispatchEvent(h);q=1E3-k.scrollTop}catch(z){}q*=0.005}else{w=Date.now();if(w-l>200){q=
q>0?+1:-1;l=w}else q=0}if(q)switch(c){case "mouse":w=j.mouse(h);f||(f=j.pointLocation(w));j.off("move",d).zoomBy(q,w,f).on("move",d);break;case "location":j.zoomBy(q,j.locationPoint(f),f);break;default:j.zoomBy(q);break}h.preventDefault();return false}var a={},l=0,e=true,c="mouse",f,j,t,n=document.createElement("div"),k=document.createElement("div");k.style.visibility="hidden";k.style.top="0px";k.style.height="0px";k.style.width="0px";k.style.overflowY="scroll";n.style.height="2000px";k.appendChild(n);
document.body.appendChild(k);a.smooth=function(h){if(!arguments.length)return e;e=h;return a};a.zoom=function(h,q){if(!arguments.length)return c;c=h;f=q;if(j)c=="mouse"?j.on("move",d):j.off("move",d);return a};a.map=function(h){if(!arguments.length)return j;if(j){t.removeEventListener("mousemove",d,false);t.removeEventListener("mousewheel",g,false);t.removeEventListener("MozMousePixelScroll",g,false);t=null;j.off("move",d)}if(j=h){c=="mouse"&&j.on("move",d);t=j.container();t.addEventListener("mousemove",
d,false);t.addEventListener("mousewheel",g,false);t.addEventListener("MozMousePixelScroll",g,false)}return a};return a};s.arrow=function(){function d(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var z=Date.now(),D=0,F=0;switch(w.keyCode){case 37:if(!c.left){f=z;c.left=1;c.right||(D=k)}break;case 39:if(!c.right){f=z;c.right=1;c.left||(D=-k)}break;case 38:if(!c.up){f=z;c.up=1;c.down||(F=k)}break;case 40:if(!c.down){f=z;c.down=1;c.up||(F=-k)}break;default:return}if(D||F)h.panBy({x:D,y:F});if(!j&&c.left|
c.right|c.up|c.down)j=setInterval(l,n);w.preventDefault()}}function g(w){f=Date.now();switch(w.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(j&&!(c.left|c.right|c.up|c.down))j=clearInterval(j);w.preventDefault()}function a(w){switch(w.charCode){case 45:case 95:h.zoom(Math.ceil(h.zoom())-1);break;case 43:case 61:h.zoom(Math.floor(h.zoom())+1);break;default:return}w.preventDefault()}function l(){if(h)if(!(Date.now()<f+t)){var w=
(c.left-c.right)*k,z=(c.up-c.down)*k;if(w||z)h.panBy({x:w,y:z})}}var e={},c={left:0,right:0,up:0,down:0},f=0,j,t=250,n=50,k=16,h,q;e.map=function(w){if(!arguments.length)return h;if(h){q.removeEventListener("keypress",a,false);q.removeEventListener("keydown",d,false);q.removeEventListener("keyup",g,false);q=null}if(h=w){q=h.focusableParent();q.addEventListener("keypress",a,false);q.addEventListener("keydown",d,false);q.addEventListener("keyup",g,false)}return e};e.speed=function(w){if(!arguments.length)return k;
k=w;return e};return e};s.hash=function(){function d(){var j=f(e);if(l!==j)location.replace(l=j)}function g(){if(location.hash!==l)if(c(e,(l=location.hash).substring(1)))d()}var a={},l,e,c=function(j,t){var n=t.split("/").map(Number);if(n.length<3||n.some(isNaN))return true;else{var k=j.size();j.zoomBy(n[0]-j.zoom(),{x:k.x/2,y:k.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,n[1])),lon:n[2]})}},f=function(j){var t=j.center();j=j.zoom();var n=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));return"#"+
j.toFixed(2)+"/"+t.lat.toFixed(n)+"/"+t.lon.toFixed(n)};a.map=function(j){if(!arguments.length)return e;if(e){e.off("move",d);window.removeEventListener("hashchange",g,false)}if(e=j){e.on("move",d);window.addEventListener("hashchange",g,false);location.hash?g():d()}return a};a.parser=function(j){if(!arguments.length)return c;c=j;return a};a.formatter=function(j){if(!arguments.length)return f;f=j;return a};return a};s.touch=function(){function d(n){var k=-1,h=n.touches.length,q=Date.now();if(h==1&&
q-c<300){var w=a.zoom();a.zoomBy(1-w+Math.floor(w),a.mouse(n.touches[0]));n.preventDefault()}c=q;f=a.zoom();for(j=a.angle();++k<h;){q=n.touches[k];t[q.identifier]=a.pointLocation(a.mouse(q))}}var g={},a,l,e=false,c=0,f,j,t={};window.addEventListener("touchmove",function(n){switch(n.touches.length){case 1:var k=n.touches[0];a.zoomBy(0,a.mouse(k),t[k.identifier]);n.preventDefault();break;case 2:k=n.touches[0];var h=n.touches[1],q=a.mouse(k),w=a.mouse(h);q={x:(q.x+w.x)/2,y:(q.y+w.y)/2};k=s.map.locationCoordinate(t[k.identifier]);
h=s.map.locationCoordinate(t[h.identifier]);h=s.map.coordinateLocation({row:(k.row+h.row)/2,column:(k.column+h.column)/2,zoom:0});a.zoomBy(Math.log(n.scale)/Math.LN2+f-a.zoom(),q,h);e&&a.angle(n.rotation/180*Math.PI+j);n.preventDefault();break}},false);g.rotate=function(n){if(!arguments.length)return e;e=n;return g};g.map=function(n){if(!arguments.length)return a;if(a){l.removeEventListener("touchstart",d,false);l=null}if(a=n){l=a.container();l.addEventListener("touchstart",d,false)}return g};return g};
s.interact=function(){var d={},g=s.drag(),a=s.wheel(),l=s.dblclick(),e=s.touch(),c=s.arrow();d.map=function(f){g.map(f);a.map(f);l.map(f);e.map(f);c.map(f);return d};return d};s.compass=function(){function d(x){C.setAttribute("class","compass active");N||(N=setInterval(g,o));M&&G.panBy(M);v=Date.now();return k(x)}function g(){M&&Date.now()>v+i&&G.panBy(M)}function a(x){if(x.shiftKey){I={x0:G.mouse(x)};G.focusableParent().focus();return k(x)}}function l(x){if(I){I.x1=G.mouse(x);Q.setAttribute("x",
Math.min(I.x0.x,I.x1.x));Q.setAttribute("y",Math.min(I.x0.y,I.x1.y));Q.setAttribute("width",Math.abs(I.x0.x-I.x1.x));Q.setAttribute("height",Math.abs(I.x0.y-I.x1.y));Q.removeAttribute("display")}}function e(){C.setAttribute("class","compass");if(I){if(I.x1){G.extent([G.pointLocation({x:Math.min(I.x0.x,I.x1.x),y:Math.max(I.x0.y,I.x1.y)}),G.pointLocation({x:Math.max(I.x0.x,I.x1.x),y:Math.min(I.x0.y,I.x1.y)})]);Q.setAttribute("display","none")}I=null}if(N){clearInterval(N);N=0}}function c(x){return function(){x?
this.setAttribute("class","active"):this.removeAttribute("class");M=x}}function f(x){return function(E){C.setAttribute("class","compass active");var H=G.zoom();G.zoom(x<0?Math.ceil(H)-1:Math.floor(H)+1);return k(E)}}function j(x){return function(E){G.zoom(x);return k(E)}}function t(){this.setAttribute("class","active")}function n(){this.removeAttribute("class")}function k(x){x.stopPropagation();x.preventDefault();return false}function h(x){var E=Math.SQRT1_2*m,H=m*0.7,J=m*0.2,K=s.svg("g"),P=K.appendChild(s.svg("path")),
W=K.appendChild(s.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d","M0,0L"+E+","+E+"A"+m+","+m+" 0 0,1 "+-E+","+E+"Z");W.setAttribute("class","chevron");W.setAttribute("d","M"+J+","+(H-J)+"L0,"+H+" "+-J+","+(H-J));W.setAttribute("pointer-events","none");K.addEventListener("mousedown",d,false);K.addEventListener("mouseover",c(x),false);K.addEventListener("mouseout",c(null),false);K.addEventListener("dblclick",k,false);return K}function q(x){var E=
m*0.4,H=E/2,J=s.svg("g"),K=J.appendChild(s.svg("path")),P=J.appendChild(s.svg("path")),W=J.appendChild(s.svg("path")),X=J.appendChild(s.svg("path"));K.setAttribute("class","back");K.setAttribute("d","M"+-E+",0V"+-E+"A"+E+","+E+" 0 1,1 "+E+","+-E+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",K.getAttribute("d"));W.setAttribute("class","chevron");W.setAttribute("d","M"+-H+","+-E+"H"+H+(x>0?"M0,"+(-E-H)+"V"+-H:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",
K.getAttribute("d"));J.addEventListener("mousedown",f(x),false);J.addEventListener("mouseover",t,false);J.addEventListener("mouseout",n,false);J.addEventListener("dblclick",k,false);return J}function w(x){var E=m*0.2,H=m*0.4,J=s.svg("g"),K=J.appendChild(s.svg("rect")),P=J.appendChild(s.svg("path"));K.setAttribute("pointer-events","all");K.setAttribute("fill","none");K.setAttribute("x",-H);K.setAttribute("y",-0.75*H);K.setAttribute("width",2*H);K.setAttribute("height",1.5*H);P.setAttribute("class",
"chevron");P.setAttribute("d","M"+-E+",0H"+E);J.addEventListener("mousedown",j(x),false);J.addEventListener("dblclick",k,false);return J}function z(){var x=m+6,E=x,H=G.size();switch(u){case "top-left":break;case "top-right":x=H.x-x;break;case "bottom-left":E=H.y-E;break;case "bottom-right":x=H.x-x;E=H.y-E;break}C.setAttribute("transform","translate("+x+","+E+")");Q.setAttribute("transform","translate("+-x+","+-E+")");for(var J in L)J==G.zoom()?L[J].setAttribute("class","active"):L[J].removeAttribute("class")}
function D(){for(;C.lastChild;)C.removeChild(C.lastChild);C.appendChild(Q);if(y!="none"){T=C.appendChild(s.svg("g"));T.setAttribute("class","pan");var x=T.appendChild(s.svg("circle"));x.setAttribute("class","back");x.setAttribute("r",m);T.appendChild(h({x:0,y:-r})).setAttribute("transform","rotate(0)");T.appendChild(h({x:r,y:0})).setAttribute("transform","rotate(90)");T.appendChild(h({x:0,y:r})).setAttribute("transform","rotate(180)");T.appendChild(h({x:-r,y:0})).setAttribute("transform","rotate(270)");
x=T.appendChild(s.svg("circle"));x.setAttribute("fill","none");x.setAttribute("class","fore");x.setAttribute("r",m)}else T=null;if(A!="none"){B=C.appendChild(s.svg("g"));B.setAttribute("class","zoom");x=-0.5;if(A=="big"){L={};var E=G.zoomRange()[0];for(x=0;E<=G.zoomRange()[1];E++,x++)(L[E]=B.appendChild(w(E))).setAttribute("transform","translate(0,"+-(x+0.75)*m*0.4+")")}E=y=="none"?0.4:2;B.setAttribute("transform","translate(0,"+m*(/^top-/.test(u)?E+(x+0.5)*0.4:-E)+")");B.appendChild(q(+1)).setAttribute("transform",
"translate(0,"+-(x+0.5)*m*0.4+")");B.appendChild(q(-1)).setAttribute("transform","scale(-1)")}else B=null;z()}var F={},C=s.svg("g"),L={},m=30,r=16,v=0,i=250,o=50,u="top-left",A="small",B,y="small",N,M,T,I,Q=s.svg("rect"),G,R,O;C.setAttribute("class","compass");Q.setAttribute("class","back fore");Q.setAttribute("pointer-events","none");Q.setAttribute("display","none");F.radius=function(x){if(!arguments.length)return m;m=x;G&&D();return F};F.speed=function(x){if(!arguments.length)return m;r=x;return F};
F.position=function(x){if(!arguments.length)return u;u=x;G&&D();return F};F.pan=function(x){if(!arguments.length)return y;y=x;G&&D();return F};F.zoom=function(x){if(!arguments.length)return A;A=x;G&&D();return F};F.map=function(x){if(!arguments.length)return G;if(G){R.removeEventListener("mousedown",a,false);R.removeChild(C);R=null;O.removeEventListener("mousemove",l,false);O.removeEventListener("mouseup",e,false);O=null;G.off("move",z).off("resize",z)}if(G=x){R=G.container();R.appendChild(C);R.addEventListener("mousedown",
a,false);O=R.ownerDocument.defaultView;O.addEventListener("mousemove",l,false);O.addEventListener("mouseup",e,false);G.on("move",z).on("resize",z);D()}return F};return F};s.grid=function(){function d(){var e=l.firstChild,c=a.size(),f=a.pointLocation($);a.pointLocation(c);var j=Math.pow(2,4-Math.round(a.zoom()));f.lat=Math.floor(f.lat/j)*j;f.lon=Math.ceil(f.lon/j)*j;for(var t;(t=a.locationPoint(f).x)<=c.x;f.lon+=j){e||(e=l.appendChild(s.svg("line")));e.setAttribute("x1",t);e.setAttribute("x2",t);e.setAttribute("y1",
0);e.setAttribute("y2",c.y);e=e.nextSibling}for(;(t=a.locationPoint(f).y)<=c.y;f.lat-=j){e||(e=l.appendChild(s.svg("line")));e.setAttribute("y1",t);e.setAttribute("y2",t);e.setAttribute("x1",0);e.setAttribute("x2",c.x);e=e.nextSibling}for(;e;){c=e.nextSibling;l.removeChild(e);e=c}}var g={},a,l=s.svg("g");l.setAttribute("class","grid");g.map=function(e){if(!arguments.length)return a;if(a){l.parentNode.removeChild(l);a.off("move",d).off("resize",d)}if(a=e){a.on("move",d).on("resize",d);a.container().appendChild(l);
a.dispatch({type:"move"})}return g};return g};s.stylist=function(){function d(e){var c=e.features.length,f=g.length,j=a.length,t,n,k,h,q,w;for(q=0;q<c;++q)if(n=(t=e.features[q]).element){t=t.data;for(w=0;w<f;++w){h=(k=g[w]).value;if(typeof h==="function")h=h.call(null,t);h==null?k.name.local?n.removeAttributeNS(k.name.space,k.name.local):n.removeAttribute(k.name):k.name.local?n.setAttributeNS(k.name.space,k.name.local,h):n.setAttribute(k.name,h)}for(w=0;w<j;++w){h=(k=a[w]).value;if(typeof h==="function")h=
h.call(null,t);h==null?n.style.removeProperty(k.name):n.style.setProperty(k.name,h,k.priority)}if(h=l){if(typeof h==="function")h=h.call(null,t);for(;n.lastChild;)n.removeChild(n.lastChild);h!=null&&n.appendChild(s.svg("title")).appendChild(document.createTextNode(h))}}}var g=[],a=[],l;d.attr=function(e,c){g.push({name:ga(e),value:c});return d};d.style=function(e,c,f){a.push({name:e,value:c,priority:arguments.length<3?null:f});return d};d.title=function(e){l=e;return d};return d}})(org.polymaps);
